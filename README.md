# Индивидуальный дипломный проект курса «Go-разработчик»

## Общие требования
Система представляет собой HTTP API со следующими требованиями к бизнес-логике:

    · регистрация, аутентификация и авторизация пользователей;
    · приём номеров заказов от зарегистрированных пользователей;
    · учёт и ведение списка переданных номеров заказов зарегистрированного пользователя;
    · учёт и ведение накопительного счёта зарегистрированного пользователя;
    · проверка принятых номеров заказов через систему расчёта баллов лояльности;
    · начисление за каждый подходящий номер заказа положенного вознаграждения на счёт лояльности пользователя.

## Абстрактная схема взаимодействия с системой
Ниже представлена абстрактная бизнес-логика взаимодействия пользователя с системой:

    1. Пользователь регистрируется в системе лояльности «Гофермарт».
    2. Пользователь совершает покупку в интернет-магазине «Гофермарт».
    3. Заказ попадает в систему расчёта баллов лояльности.
    4. Пользователь передаёт номер совершённого заказа в систему лояльности.
    5. Система связывает номер заказа с пользователем и сверяет номер с системой расчёта баллов лояльности.
    6. При наличии положительного расчёта баллов лояльности производится начисление баллов лояльности на счёт пользователя.
    7. Пользователь списывает доступные баллы лояльности для частичной или полной оплаты последующих заказов в интернет-магазине «Гофермарт».

Примечания:

    · пункт 2 представлен как гипотетический и не требует реализации в данной работе;
    · пункт 3 реализован в системе расчёта баллов лояльности и не требует реализации в данной работе.

## Система расчета баллов лояльности
Система расчета баллов лояльности является внешним сервисом в доверенном контуре. Он работает по принципу чёрного ящика и недоступен для инспекции внешними клиентами. Система рассчитывает положенные баллы лояльности за совершённый заказ по сложным алгоритмам, которые могут меняться в любой момент времени.
Внешнему потребителю доступна только информация о количестве положенных за конкретный заказ баллов лояльности. Причины наличия или отсутствия начислений внешнему потребителю неизвестны.

## Сводное HTTP API
Накопительная система лояльности «Гофермарт» должна предоставлять следующие HTTP-хендлеры:

    · POST /api/user/register — регистрация пользователя;
    · POST /api/user/login — аутентификация пользователя;
    · POST /api/user/orders — загрузка пользователем номера заказа для расчёта;
    · GET /api/user/orders — получение списка загруженных пользователем номеров заказов, статусов их обработки и информации о начислениях;
    · GET /api/user/balance — получение текущего баланса счёта баллов лояльности пользователя;
    · POST /api/user/balance/withdraw — запрос на списание баллов с накопительного счёта в счёт оплаты нового заказа;
    · GET /api/user/withdrawals — получение информации о выводе средств с накопительного счёта пользователем.

## Общие ограничения и требования

    · хранилище данных — PostgreSQL;
    · структура таблиц остаётся на усмотрение студента;
    · типы и формат хранения данных (в том числе паролей и прочей чувствительной информации) остаётся на усмотрение студента;
    · клиент может поддерживать HTTP-запросы/ответы со сжатием данных;
    · клиент не обязан делать запросы соответственно нижеизложенной спецификации API, любая проверка запроса остаётся на усмотрение студента;
    · формат и алгоритм проверки аутентификации и авторизации пользователя остаётся на усмотрение студента;
    · номера заказов уникальны и никогда не повторяются;
    · номер заказа может быть принят в обработку только один раз от одного пользователя;
    · номер заказа может не иметь никакого начисления;
    · вознаграждение начисляется и тратится в виртуальных баллах из расчёта 1 балл = 1 рубль.
